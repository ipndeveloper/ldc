<div #controlarCerealesSection id="controlarCerealesSection" class="container-fluid" >
  <form [formGroup]="form" novalidate>
    <yrd-circuito
      [circuitoForm]="form.controls.circuito"
      [completarTipoProducto]="completarTipoProducto">
    </yrd-circuito>
    <yrd-documento-porte #documentoPorte
      [esVagon]="true"
      [tipoProducto]="tipoProductoSeleccionada"
      [tipoTransporte]="tipoTransporte"
      [tipoDocumento]="tipoDocumentoSeleccionado"
      [maskRegex]="tipoDocPorteRegex"
      [documentoPorteForm]="form.controls.documentoPorte"
      [esModificacionDocPorte]="esModificacionVagon"
      [esConsulta]="esConsulta"
      [esVagonCerealElectronica]="esVagonCerealElectronica"
      [esCartaPorteElectronica]="esCartaPorteElectronica"
      (recuperarDatoCpe)="OnBlurRecuperarDatoCpe()"
      (recuperarDocPorteClicked)="recuperarDocPorte()">
    </yrd-documento-porte>
    <yrd-datos-documento-controlar-descarga-vagon-cereales #datosDocumento
      [terminal]="terminal"
      [esConsulta]="esConsulta"
      [circuito]="circuito"
      [recuperoDocumentoPorte]="recuperoDocumentoPorte"
      [esModificacionDocPorte]="esModificacionDocPorte"
      [esAlta]="esAlta"
      [esFueraCircuito]="esFueraCircuito"
      [cargaNuevoVagon]="cargaNuevoVagon"
      [confirmoCtg]="confirmoCtg"
      [confirmadoManualmente]="confirmadoManualmente"
      [esRegimenElectronico]="esCartaPorteElectronica"
      (esAfipAutomatico)="onEsAfipAutomatico($event)">
    </yrd-datos-documento-controlar-descarga-vagon-cereales>    
    <div class="mt-3">
      <div class="float-right" style="margin-bottom: 20pt">
        <button type="button" class="btn btn-success" 
          *ngIf="!esConsulta && verBotonAceptarModificacion"
          [disabled]="botonesDeshabilitados"   
          (click)="aceptarYNuevoDocPorte()"
          i18n>Aceptar</button>
        <button type="button" class="btn btn-success"
          *ngIf="!esConsulta && !verBotonAceptarModificacion && !esCartaPorteElectronica" 
          [disabled]="botonesDeshabilitados"  
          (click)="aceptarYNuevoDocPorte()" 
          i18n>Aceptar y Nuevo Doc. Porte</button>
        <button type="button" class="btn btn-success"
          *ngIf="!esConsulta && !verBotonAceptarModificacion && esCartaPorteElectronica" 
          [disabled]="botonesDeshabilitados"  
          (click)="aceptarYNuevoDocPorte()" 
          i18n>Aceptar</button>
        <button type="button" class="btn btn-primary"
          *ngIf="!esConsulta && !verBotonAceptarModificacion && !esCartaPorteElectronica" 
          [disabled]="botonesDeshabilitados"
          (click)="aceptarYNuevoVagon()" 
          i18n>Aceptar y Nuevo Vag√≥n</button>
        <button type="button" class="btn btn-danger" 
          [disabled]="botonesDeshabilitados"
          (click)="cancelar()">Cancelar</button>
      </div>
    </div>
  </form>
</div>

<yrd-modal-autorizacion #modalAutorizacion (autorizacionCompletada)="onAutorizacionCompletada($event)"></yrd-modal-autorizacion>
<yrd-modal-asignar-tarjeta #modalAsignarTarjeta (tarjetaAsignada)="onTarjetaAsignada()"></yrd-modal-asignar-tarjeta>
